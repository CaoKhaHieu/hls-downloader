/*! For license information please see hls-downloader.js.LICENSE.txt */
(()=>{var t={840:(t,e,r)=>{var n;n="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},t.exports=n}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};r.r(t),r.d(t,{hasBrowserEnv:()=>Ut,hasStandardBrowserEnv:()=>Bt,hasStandardBrowserWebWorkerEnv:()=>Ft,navigator:()=>Mt,origin:()=>Xt});const e=(t,e)=>e.some((e=>t instanceof e));let n,i;const s=new WeakMap,a=new WeakMap,o=new WeakMap;let u={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return s.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return d(t[e])},set:(t,e,r)=>(t[e]=r,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function c(t){u=t(u)}function l(t){return"function"==typeof t?(r=t,(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...t){return r.apply(f(this),t),d(this.request)}:function(...t){return d(r.apply(f(this),t))}):(t instanceof IDBTransaction&&function(t){if(s.has(t))return;const e=new Promise(((e,r)=>{const n=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),n()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));s.set(t,e)}(t),e(t,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,u):t);var r}function d(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,r)=>{const n=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(d(t.result)),n()},s=()=>{r(t.error),n()};t.addEventListener("success",i),t.addEventListener("error",s)}));return o.set(e,t),e}(t);if(a.has(t))return a.get(t);const e=l(t);return e!==t&&(a.set(t,e),o.set(e,t)),e}const f=t=>o.get(t),h=["get","getKey","getAll","getAllKeys","count"],p=["put","add","delete","clear"],g=new Map;function m(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(g.get(e))return g.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=p.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!h.includes(r))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let a=s.store;return n&&(a=a.index(e.shift())),(await Promise.all([a[r](...e),i&&s.done]))[0]};return g.set(e,s),s}c((t=>({...t,get:(e,r,n)=>m(e,r)||t.get(e,r,n),has:(e,r)=>!!m(e,r)||t.has(e,r)})));const b=["continue","continuePrimaryKey","advance"],E={},y=new WeakMap,T=new WeakMap,w={get(t,e){if(!b.includes(e))return t[e];let r=E[e];return r||(r=E[e]=function(...t){y.set(this,T.get(this)[e](...t))}),r}};async function*R(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const r=new Proxy(e,w);for(T.set(r,e),o.set(r,f(e));e;)yield r,e=await(y.get(r)||e.continue()),y.delete(r)}function A(t,r){return r===Symbol.asyncIterator&&e(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===r&&e(t,[IDBIndex,IDBObjectStore])}c((t=>({...t,get:(e,r,n)=>A(e,r)?R:t.get(e,r,n),has:(e,r)=>A(e,r)||t.has(e,r)})));const O=class{constructor(t="hls-downloader",e="video",r=1){this.db=null,this.dbName=t,this.storeName=e,this.dbVersion=r}async init(){try{this.db=await function(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=d(a);return n&&a.addEventListener("upgradeneeded",(t=>{n(d(a.result),t.oldVersion,t.newVersion,d(a.transaction),t)})),r&&a.addEventListener("blocked",(t=>r(t.oldVersion,t.newVersion,t))),o.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}(this.dbName,this.dbVersion,{upgrade:t=>{t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName)}}),console.log("IndexedDB initialized")}catch(t){console.error("Error opening IndexedDB:",t)}}async save(t,e){if(this.db)try{const r=this.db.transaction(this.storeName,"readwrite"),n=r.objectStore(this.storeName);await n.put(e,t),await r.done}catch(t){console.error("Error saving to IndexedDB:",t)}else console.warn("Database is not initialized")}async delete(t){if(this.db)try{const e=this.db.transaction(this.storeName,"readwrite"),r=e.objectStore(this.storeName);await r.delete(t),await e.done}catch(t){console.error("Error deleting from IndexedDB:",t)}else console.warn("Database is not initialized")}async get(t){if(!this.db)return console.warn("Database is not initialized"),null;try{const e=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName);return await e.get(t)}catch(t){return console.error("Error getting data from IndexedDB:",t),null}}};function S(t,e){return function(){return t.apply(e,arguments)}}const{toString:D}=Object.prototype,{getPrototypeOf:N}=Object,I=(v=Object.create(null),t=>{const e=D.call(t);return v[e]||(v[e]=e.slice(8,-1).toLowerCase())});var v;const P=t=>(t=t.toLowerCase(),e=>I(e)===t),C=t=>e=>typeof e===t,{isArray:x}=Array,L=C("undefined"),U=P("ArrayBuffer"),M=C("string"),B=C("function"),F=C("number"),X=t=>null!==t&&"object"==typeof t,j=t=>{if("object"!==I(t))return!1;const e=N(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},k=P("Date"),_=P("File"),$=P("Blob"),q=P("FileList"),G=P("URLSearchParams"),[H,V,K,Y]=["ReadableStream","Request","Response","Headers"].map(P);function z(t,e,{allOwnKeys:r=!1}={}){if(null==t)return;let n,i;if("object"!=typeof t&&(t=[t]),x(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length;let a;for(n=0;n<s;n++)a=i[n],e.call(null,t[a],a,t)}}function W(t,e){e=e.toLowerCase();const r=Object.keys(t);let n,i=r.length;for(;i-- >0;)if(n=r[i],e===n.toLowerCase())return n;return null}const J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Q=t=>!L(t)&&t!==J,Z=(tt="undefined"!=typeof Uint8Array&&N(Uint8Array),t=>tt&&t instanceof tt);var tt;const et=P("HTMLFormElement"),rt=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),nt=P("RegExp"),it=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};z(r,((r,i)=>{let s;!1!==(s=e(r,i,t))&&(n[i]=s||r)})),Object.defineProperties(t,n)},st="abcdefghijklmnopqrstuvwxyz",at="0123456789",ot={DIGIT:at,ALPHA:st,ALPHA_DIGIT:st+st.toUpperCase()+at},ut=P("AsyncFunction"),ct=(lt="function"==typeof setImmediate,dt=B(J.postMessage),lt?setImmediate:dt?(ft=`axios@${Math.random()}`,ht=[],J.addEventListener("message",(({source:t,data:e})=>{t===J&&e===ft&&ht.length&&ht.shift()()}),!1),t=>{ht.push(t),J.postMessage(ft,"*")}):t=>setTimeout(t));var lt,dt,ft,ht;const pt="undefined"!=typeof queueMicrotask?queueMicrotask.bind(J):"undefined"!=typeof process&&process.nextTick||ct,gt={isArray:x,isArrayBuffer:U,isBuffer:function(t){return null!==t&&!L(t)&&null!==t.constructor&&!L(t.constructor)&&B(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||B(t.append)&&("formdata"===(e=I(t))||"object"===e&&B(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&U(t.buffer),e},isString:M,isNumber:F,isBoolean:t=>!0===t||!1===t,isObject:X,isPlainObject:j,isReadableStream:H,isRequest:V,isResponse:K,isHeaders:Y,isUndefined:L,isDate:k,isFile:_,isBlob:$,isRegExp:nt,isFunction:B,isStream:t=>X(t)&&B(t.pipe),isURLSearchParams:G,isTypedArray:Z,isFileList:q,forEach:z,merge:function t(){const{caseless:e}=Q(this)&&this||{},r={},n=(n,i)=>{const s=e&&W(r,i)||i;j(r[s])&&j(n)?r[s]=t(r[s],n):j(n)?r[s]=t({},n):x(n)?r[s]=n.slice():r[s]=n};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&z(arguments[t],n);return r},extend:(t,e,r,{allOwnKeys:n}={})=>(z(e,((e,n)=>{r&&B(e)?t[n]=S(e,r):t[n]=e}),{allOwnKeys:n}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],n&&!n(a,t,e)||o[a]||(e[a]=t[a],o[a]=!0);t=!1!==r&&N(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:I,kindOfTest:P,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return-1!==n&&n===r},toArray:t=>{if(!t)return null;if(x(t))return t;let e=t.length;if(!F(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=r.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},matchAll:(t,e)=>{let r;const n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:et,hasOwnProperty:rt,hasOwnProp:rt,reduceDescriptors:it,freezeMethods:t=>{it(t,((e,r)=>{if(B(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=t[r];B(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(t,e)=>{const r={},n=t=>{t.forEach((t=>{r[t]=!0}))};return x(t)?n(t):n(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:W,global:J,isContextDefined:Q,ALPHABET:ot,generateString:(t=16,e=ot.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&B(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),r=(t,n)=>{if(X(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const i=x(t)?[]:{};return z(t,((t,e)=>{const s=r(t,n+1);!L(s)&&(i[e]=s)})),e[n]=void 0,i}}return t};return r(t,0)},isAsyncFn:ut,isThenable:t=>t&&(X(t)||B(t))&&B(t.then)&&B(t.catch),setImmediate:ct,asap:pt};function mt(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}gt.inherits(mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:gt.toJSONObject(this.config),code:this.code,status:this.status}}});const bt=mt.prototype,Et={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Et[t]={value:t}})),Object.defineProperties(mt,Et),Object.defineProperty(bt,"isAxiosError",{value:!0}),mt.from=(t,e,r,n,i,s)=>{const a=Object.create(bt);return gt.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),mt.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const yt=mt;function Tt(t){return gt.isPlainObject(t)||gt.isArray(t)}function wt(t){return gt.endsWith(t,"[]")?t.slice(0,-2):t}function Rt(t,e,r){return t?t.concat(e).map((function(t,e){return t=wt(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}const At=gt.toFlatObject(gt,{},null,(function(t){return/^is[A-Z]/.test(t)})),Ot=function(t,e,r){if(!gt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const n=(r=gt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!gt.isUndefined(e[t])}))).metaTokens,i=r.visitor||c,s=r.dots,a=r.indexes,o=(r.Blob||"undefined"!=typeof Blob&&Blob)&&gt.isSpecCompliantForm(e);if(!gt.isFunction(i))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(gt.isDate(t))return t.toISOString();if(!o&&gt.isBlob(t))throw new yt("Blob is not supported. Use a Buffer instead.");return gt.isArrayBuffer(t)||gt.isTypedArray(t)?o&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,r,i){let o=t;if(t&&!i&&"object"==typeof t)if(gt.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(gt.isArray(t)&&function(t){return gt.isArray(t)&&!t.some(Tt)}(t)||(gt.isFileList(t)||gt.endsWith(r,"[]"))&&(o=gt.toArray(t)))return r=wt(r),o.forEach((function(t,n){!gt.isUndefined(t)&&null!==t&&e.append(!0===a?Rt([r],n,s):null===a?r:r+"[]",u(t))})),!1;return!!Tt(t)||(e.append(Rt(i,r,s),u(t)),!1)}const l=[],d=Object.assign(At,{defaultVisitor:c,convertValue:u,isVisitable:Tt});if(!gt.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!gt.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),gt.forEach(r,(function(r,s){!0===(!(gt.isUndefined(r)||null===r)&&i.call(e,r,gt.isString(s)?s.trim():s,n,d))&&t(r,n?n.concat(s):[s])})),l.pop()}}(t),e};function St(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Dt(t,e){this._pairs=[],t&&Ot(t,this,e)}const Nt=Dt.prototype;Nt.append=function(t,e){this._pairs.push([t,e])},Nt.toString=function(t){const e=t?function(e){return t.call(this,e,St)}:St;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const It=Dt;function vt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pt(t,e,r){if(!e)return t;const n=r&&r.encode||vt;gt.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(s=i?i(e,r):gt.isURLSearchParams(e)?e.toString():new It(e,r).toString(n),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}const Ct=class{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){gt.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},xt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:It,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ut="undefined"!=typeof window&&"undefined"!=typeof document,Mt="object"==typeof navigator&&navigator||void 0,Bt=Ut&&(!Mt||["ReactNative","NativeScript","NS"].indexOf(Mt.product)<0),Ft="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Xt=Ut&&window.location.href||"http://localhost",jt={...t,...Lt},kt=function(t){function e(t,r,n,i){let s=t[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=t.length;return s=!s&&gt.isArray(n)?n.length:s,o?(gt.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!a):(n[s]&&gt.isObject(n[s])||(n[s]=[]),e(t,r,n[s],i)&&gt.isArray(n[s])&&(n[s]=function(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}(n[s])),!a)}if(gt.isFormData(t)&&gt.isFunction(t.entries)){const r={};return gt.forEachEntry(t,((t,n)=>{e(function(t){return gt.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),n,r,0)})),r}return null},_t={transitional:xt,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const r=e.getContentType()||"",n=r.indexOf("application/json")>-1,i=gt.isObject(t);if(i&&gt.isHTMLForm(t)&&(t=new FormData(t)),gt.isFormData(t))return n?JSON.stringify(kt(t)):t;if(gt.isArrayBuffer(t)||gt.isBuffer(t)||gt.isStream(t)||gt.isFile(t)||gt.isBlob(t)||gt.isReadableStream(t))return t;if(gt.isArrayBufferView(t))return t.buffer;if(gt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Ot(t,new jt.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return jt.isNode&&gt.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=gt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Ot(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||n?(e.setContentType("application/json",!1),function(t){if(gt.isString(t))try{return(0,JSON.parse)(t),gt.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||_t.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(gt.isResponse(t)||gt.isReadableStream(t))return t;if(t&&gt.isString(t)&&(r&&!this.responseType||n)){const r=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw yt.from(t,yt.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};gt.forEach(["delete","get","head","post","put","patch"],(t=>{_t.headers[t]={}}));const $t=_t,qt=gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gt=Symbol("internals");function Ht(t){return t&&String(t).trim().toLowerCase()}function Vt(t){return!1===t||null==t?t:gt.isArray(t)?t.map(Vt):String(t)}function Kt(t,e,r,n,i){return gt.isFunction(n)?n.call(this,e,r):(i&&(e=r),gt.isString(e)?gt.isString(n)?-1!==e.indexOf(n):gt.isRegExp(n)?n.test(e):void 0:void 0)}class Yt{constructor(t){t&&this.set(t)}set(t,e,r){const n=this;function i(t,e,r){const i=Ht(e);if(!i)throw new Error("header name must be a non-empty string");const s=gt.findKey(n,i);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||e]=Vt(t))}const s=(t,e)=>gt.forEach(t,((t,r)=>i(t,r,e)));if(gt.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if(gt.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))s((t=>{const e={};let r,n,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),r=t.substring(0,i).trim().toLowerCase(),n=t.substring(i+1).trim(),!r||e[r]&&qt[r]||("set-cookie"===r?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)})),e})(t),e);else if(gt.isHeaders(t))for(const[e,n]of t.entries())i(n,e,r);else null!=t&&i(e,t,r);return this}get(t,e){if(t=Ht(t)){const r=gt.findKey(this,t);if(r){const t=this[r];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}(t);if(gt.isFunction(e))return e.call(this,t,r);if(gt.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ht(t)){const r=gt.findKey(this,t);return!(!r||void 0===this[r]||e&&!Kt(0,this[r],r,e))}return!1}delete(t,e){const r=this;let n=!1;function i(t){if(t=Ht(t)){const i=gt.findKey(r,t);!i||e&&!Kt(0,r[i],i,e)||(delete r[i],n=!0)}}return gt.isArray(t)?t.forEach(i):i(t),n}clear(t){const e=Object.keys(this);let r=e.length,n=!1;for(;r--;){const i=e[r];t&&!Kt(0,this[i],i,t,!0)||(delete this[i],n=!0)}return n}normalize(t){const e=this,r={};return gt.forEach(this,((n,i)=>{const s=gt.findKey(r,i);if(s)return e[s]=Vt(n),void delete e[i];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,r)=>e.toUpperCase()+r))}(i):String(i).trim();a!==i&&delete e[i],e[a]=Vt(n),r[a]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return gt.forEach(this,((r,n)=>{null!=r&&!1!==r&&(e[n]=t&&gt.isArray(r)?r.join(", "):r)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach((t=>r.set(t))),r}static accessor(t){const e=(this[Gt]=this[Gt]={accessors:{}}).accessors,r=this.prototype;function n(t){const n=Ht(t);e[n]||(function(t,e){const r=gt.toCamelCase(" "+e);["get","set","has"].forEach((n=>{Object.defineProperty(t,n+r,{value:function(t,r,i){return this[n].call(this,e,t,r,i)},configurable:!0})}))}(r,t),e[n]=!0)}return gt.isArray(t)?t.forEach(n):n(t),this}}Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),gt.reduceDescriptors(Yt.prototype,(({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[r]=t}}})),gt.freezeMethods(Yt);const zt=Yt;function Wt(t,e){const r=this||$t,n=e||r,i=zt.from(n.headers);let s=n.data;return gt.forEach(t,(function(t){s=t.call(r,s,i.normalize(),e?e.status:void 0)})),i.normalize(),s}function Jt(t){return!(!t||!t.__CANCEL__)}function Qt(t,e,r){yt.call(this,null==t?"canceled":t,yt.ERR_CANCELED,e,r),this.name="CanceledError"}gt.inherits(Qt,yt,{__CANCEL__:!0});const Zt=Qt;function te(t,e,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new yt("Request failed with status code "+r.status,[yt.ERR_BAD_REQUEST,yt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}const ee=(t,e,r=3)=>{let n=0;const i=function(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i,s=0,a=0;return e=void 0!==e?e:1e3,function(o){const u=Date.now(),c=n[a];i||(i=u),r[s]=o,n[s]=u;let l=a,d=0;for(;l!==s;)d+=r[l++],l%=t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),u-i<e)return;const f=c&&u-c;return f?Math.round(1e3*d/f):void 0}}(50,250);return function(t,e){let r,n,i=0,s=1e3/e;const a=(e,s=Date.now())=>{i=s,r=null,n&&(clearTimeout(n),n=null),t.apply(null,e)};return[(...t)=>{const e=Date.now(),o=e-i;o>=s?a(t,e):(r=t,n||(n=setTimeout((()=>{n=null,a(r)}),s-o)))},()=>r&&a(r)]}((r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-n,u=i(o);n=s,t({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:u||void 0,estimated:u&&a&&s<=a?(a-s)/u:void 0,event:r,lengthComputable:null!=a,[e?"download":"upload"]:!0})}),r)},re=(t,e)=>{const r=null!=t;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},ne=t=>(...e)=>gt.asap((()=>t(...e))),ie=jt.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,jt.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,se=jt.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const a=[t+"="+encodeURIComponent(e)];gt.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),gt.isString(n)&&a.push("path="+n),gt.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ae(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const oe=t=>t instanceof zt?{...t}:t;function ue(t,e){e=e||{};const r={};function n(t,e,r,n){return gt.isPlainObject(t)&&gt.isPlainObject(e)?gt.merge.call({caseless:n},t,e):gt.isPlainObject(e)?gt.merge({},e):gt.isArray(e)?e.slice():e}function i(t,e,r,i){return gt.isUndefined(e)?gt.isUndefined(t)?void 0:n(void 0,t,0,i):n(t,e,0,i)}function s(t,e){if(!gt.isUndefined(e))return n(void 0,e)}function a(t,e){return gt.isUndefined(e)?gt.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function o(r,i,s){return s in e?n(r,i):s in t?n(void 0,r):void 0}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(t,e,r)=>i(oe(t),oe(e),0,!0)};return gt.forEach(Object.keys(Object.assign({},t,e)),(function(n){const s=u[n]||i,a=s(t[n],e[n],n);gt.isUndefined(a)&&s!==o||(r[n]=a)})),r}const ce=t=>{const e=ue({},t);let r,{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:u}=e;if(e.headers=o=zt.from(o),e.url=Pt(ae(e.baseURL,e.url),t.params,t.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),gt.isFormData(n))if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(r=o.getContentType())){const[t,...e]=r?r.split(";").map((t=>t.trim())).filter(Boolean):[];o.setContentType([t||"multipart/form-data",...e].join("; "))}if(jt.hasStandardBrowserEnv&&(i&&gt.isFunction(i)&&(i=i(e)),i||!1!==i&&ie(e.url))){const t=s&&a&&se.read(a);t&&o.set(s,t)}return e},le="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){const n=ce(t);let i=n.data;const s=zt.from(n.headers).normalize();let a,o,u,c,l,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=n;function p(){c&&c(),l&&l(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=zt.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());te((function(t){e(t),p()}),(function(t){r(t),p()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:t,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(r(new yt("Request aborted",yt.ECONNABORTED,t,g)),g=null)},g.onerror=function(){r(new yt("Network Error",yt.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let e=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||xt;n.timeoutErrorMessage&&(e=n.timeoutErrorMessage),r(new yt(e,i.clarifyTimeoutError?yt.ETIMEDOUT:yt.ECONNABORTED,t,g)),g=null},void 0===i&&s.setContentType(null),"setRequestHeader"in g&&gt.forEach(s.toJSON(),(function(t,e){g.setRequestHeader(e,t)})),gt.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),d&&"json"!==d&&(g.responseType=n.responseType),h&&([u,l]=ee(h,!0),g.addEventListener("progress",u)),f&&g.upload&&([o,c]=ee(f),g.upload.addEventListener("progress",o),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=e=>{g&&(r(!e||e.type?new Zt(null,t,g):e),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const b=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(n.url);b&&-1===jt.protocols.indexOf(b)?r(new yt("Unsupported protocol "+b+":",yt.ERR_BAD_REQUEST,t)):g.send(i||null)}))},de=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let r,n=new AbortController;const i=function(t){if(!r){r=!0,a();const e=t instanceof Error?t:this.reason;n.abort(e instanceof yt?e:new Zt(e instanceof Error?e.message:e))}};let s=e&&setTimeout((()=>{s=null,i(new yt(`timeout ${e} of ms exceeded`,yt.ETIMEDOUT))}),e);const a=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach((t=>{t.unsubscribe?t.unsubscribe(i):t.removeEventListener("abort",i)})),t=null)};t.forEach((t=>t.addEventListener("abort",i)));const{signal:o}=n;return o.unsubscribe=()=>gt.asap(a),o}},fe=function*(t,e){let r=t.byteLength;if(!e||r<e)return void(yield t);let n,i=0;for(;i<r;)n=i+e,yield t.slice(i,n),i=n},he=(t,e,r,n)=>{const i=async function*(t,e){for await(const r of async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}}(t))yield*fe(r,e)}(t,e);let s,a=0,o=t=>{s||(s=!0,n&&n(t))};return new ReadableStream({async pull(t){try{const{done:e,value:n}=await i.next();if(e)return o(),void t.close();let s=n.byteLength;if(r){let t=a+=s;r(t)}t.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:t=>(o(t),i.return())},{highWaterMark:2})},pe="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,ge=pe&&"function"==typeof ReadableStream,me=pe&&("function"==typeof TextEncoder?(be=new TextEncoder,t=>be.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var be;const Ee=(t,...e)=>{try{return!!t(...e)}catch(t){return!1}},ye=ge&&Ee((()=>{let t=!1;const e=new Request(jt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})),Te=ge&&Ee((()=>gt.isReadableStream(new Response("").body))),we={stream:Te&&(t=>t.body)};var Re;pe&&(Re=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!we[t]&&(we[t]=gt.isFunction(Re[t])?e=>e[t]():(e,r)=>{throw new yt(`Response type '${t}' is not supported`,yt.ERR_NOT_SUPPORT,r)})})));const Ae={http:null,xhr:le,fetch:pe&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:u,responseType:c,headers:l,withCredentials:d="same-origin",fetchOptions:f}=ce(t);c=c?(c+"").toLowerCase():"text";let h,p=de([i,s&&s.toAbortSignal()],a);const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(u&&ye&&"get"!==r&&"head"!==r&&0!==(m=await(async(t,e)=>{const r=gt.toFiniteNumber(t.getContentLength());return null==r?(async t=>{if(null==t)return 0;if(gt.isBlob(t))return t.size;if(gt.isSpecCompliantForm(t)){const e=new Request(jt.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return gt.isArrayBufferView(t)||gt.isArrayBuffer(t)?t.byteLength:(gt.isURLSearchParams(t)&&(t+=""),gt.isString(t)?(await me(t)).byteLength:void 0)})(e):r})(l,n))){let t,r=new Request(e,{method:"POST",body:n,duplex:"half"});if(gt.isFormData(n)&&(t=r.headers.get("content-type"))&&l.setContentType(t),r.body){const[t,e]=re(m,ee(ne(u)));n=he(r.body,65536,t,e)}}gt.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;h=new Request(e,{...f,signal:p,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:i?d:void 0});let s=await fetch(h);const a=Te&&("stream"===c||"response"===c);if(Te&&(o||a&&g)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=s[e]}));const e=gt.toFiniteNumber(s.headers.get("content-length")),[r,n]=o&&re(e,ee(ne(o),!0))||[];s=new Response(he(s.body,65536,r,(()=>{n&&n(),g&&g()})),t)}c=c||"text";let b=await we[gt.findKey(we,c)||"text"](s,t);return!a&&g&&g(),await new Promise(((e,r)=>{te(e,r,{data:b,headers:zt.from(s.headers),status:s.status,statusText:s.statusText,config:t,request:h})}))}catch(e){if(g&&g(),e&&"TypeError"===e.name&&/fetch/i.test(e.message))throw Object.assign(new yt("Network Error",yt.ERR_NETWORK,t,h),{cause:e.cause||e});throw yt.from(e,e&&e.code,t,h)}})};gt.forEach(Ae,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const Oe=t=>`- ${t}`,Se=t=>gt.isFunction(t)||null===t||!1===t,De=t=>{t=gt.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){let e;if(r=t[s],n=r,!Se(r)&&(n=Ae[(e=String(r)).toLowerCase()],void 0===n))throw new yt(`Unknown adapter '${e}'`);if(n)break;i[e||"#"+s]=n}if(!n){const t=Object.entries(i).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let r=e?t.length>1?"since :\n"+t.map(Oe).join("\n"):" "+Oe(t[0]):"as no adapter specified";throw new yt("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function Ne(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zt(null,t)}function Ie(t){return Ne(t),t.headers=zt.from(t.headers),t.data=Wt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),De(t.adapter||$t.adapter)(t).then((function(e){return Ne(t),e.data=Wt.call(t,t.transformResponse,e),e.headers=zt.from(e.headers),e}),(function(e){return Jt(e)||(Ne(t),e&&e.response&&(e.response.data=Wt.call(t,t.transformResponse,e.response),e.response.headers=zt.from(e.response.headers))),Promise.reject(e)}))}const ve={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{ve[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));const Pe={};ve.transitional=function(t,e,r){function n(t,e){return"[Axios v1.7.9] Transitional option '"+t+"'"+e+(r?". "+r:"")}return(r,i,s)=>{if(!1===t)throw new yt(n(i," has been removed"+(e?" in "+e:"")),yt.ERR_DEPRECATED);return e&&!Pe[i]&&(Pe[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,i,s)}},ve.spelling=function(t){return(e,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};const Ce={assertOptions:function(t,e,r){if("object"!=typeof t)throw new yt("options must be an object",yt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const e=t[s],r=void 0===e||a(e,s,t);if(!0!==r)throw new yt("option "+s+" must be "+r,yt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new yt("Unknown option "+s,yt.ERR_BAD_OPTION)}},validators:ve},xe=Ce.validators;class Le{constructor(t){this.defaults=t,this.interceptors={request:new Ct,response:new Ct}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const r=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?r&&!String(t.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+r):t.stack=r}catch(t){}}throw t}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=ue(this.defaults,e);const{transitional:r,paramsSerializer:n,headers:i}=e;void 0!==r&&Ce.assertOptions(r,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),null!=n&&(gt.isFunction(n)?e.paramsSerializer={serialize:n}:Ce.assertOptions(n,{encode:xe.function,serialize:xe.function},!0)),Ce.assertOptions(e,{baseUrl:xe.spelling("baseURL"),withXsrfToken:xe.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=i&&gt.merge(i.common,i[e.method]);i&&gt.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=zt.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));const u=[];let c;this.interceptors.response.forEach((function(t){u.push(t.fulfilled,t.rejected)}));let l,d=0;if(!o){const t=[Ie.bind(this),void 0];for(t.unshift.apply(t,a),t.push.apply(t,u),l=t.length,c=Promise.resolve(e);d<l;)c=c.then(t[d++],t[d++]);return c}l=a.length;let f=e;for(d=0;d<l;){const t=a[d++],e=a[d++];try{f=t(f)}catch(t){e.call(this,t);break}}try{c=Ie.call(this,f)}catch(t){return Promise.reject(t)}for(d=0,l=u.length;d<l;)c=c.then(u[d++],u[d++]);return c}getUri(t){return Pt(ae((t=ue(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}gt.forEach(["delete","get","head","options"],(function(t){Le.prototype[t]=function(e,r){return this.request(ue(r||{},{method:t,url:e,data:(r||{}).data}))}})),gt.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,i){return this.request(ue(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Le.prototype[t]=e(),Le.prototype[t+"Form"]=e(!0)}));const Ue=Le;class Me{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const r=this;this.promise.then((t=>{if(!r._listeners)return;let e=r._listeners.length;for(;e-- >0;)r._listeners[e](t);r._listeners=null})),this.promise.then=t=>{let e;const n=new Promise((t=>{r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t,n,i){r.reason||(r.reason=new Zt(t,n,i),e(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Me((function(e){t=e})),cancel:t}}}const Be=Me,Fe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fe).forEach((([t,e])=>{Fe[e]=t}));const Xe=Fe,je=function t(e){const r=new Ue(e),n=S(Ue.prototype.request,r);return gt.extend(n,Ue.prototype,r,{allOwnKeys:!0}),gt.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return t(ue(e,r))},n}($t);je.Axios=Ue,je.CanceledError=Zt,je.CancelToken=Be,je.isCancel=Jt,je.VERSION="1.7.9",je.toFormData=Ot,je.AxiosError=yt,je.Cancel=je.CanceledError,je.all=function(t){return Promise.all(t)},je.spread=function(t){return function(e){return t.apply(null,e)}},je.isAxiosError=function(t){return gt.isObject(t)&&!0===t.isAxiosError},je.mergeConfig=ue,je.AxiosHeaders=zt,je.formToJSON=t=>kt(gt.isHTMLForm(t)?new FormData(t):t),je.getAdapter=De,je.HttpStatusCode=Xe,je.default=je;const ke=je;var _e=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var r=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(r,1),r>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var r=e.length,n=0;n<r;++n)e[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),s=e.length,a=0;a<s;++a)e[a].apply(this,i)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();function $e(){return $e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$e.apply(null,arguments)}var qe=r(840),Ge=r.n(qe);function He(t){for(var e,r=(e=t,Ge().atob?Ge().atob(e):Buffer.from(e,"base64").toString("binary")),n=new Uint8Array(r.length),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class Ve extends _e{constructor(){super(),this.buffer=""}push(t){let e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}const Ke=String.fromCharCode(9),Ye=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),r={};return e[1]&&(r.length=parseInt(e[1],10)),e[2]&&(r.offset=parseInt(e[2],10)),r},ze=function(t){const e={};if(!t)return e;const r=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let n,i=r.length;for(;i--;)""!==r[i]&&(n=/([^=]*)=(.*)/.exec(r[i]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e},We=t=>{const e=t.split("x"),r={};return e[0]&&(r.width=parseInt(e[0],10)),e[1]&&(r.height=parseInt(e[1],10)),r};class Je extends _e{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let e,r;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce(((e,r)=>{const n=r(t);return n===t?e:e.concat([n])}),[t]).forEach((t=>{for(let e=0;e<this.customParsers.length;e++)if(this.customParsers[e].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t),e)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(t),e)return r={type:"tag",tagType:"inf"},e[1]&&(r.duration=parseFloat(e[1])),e[2]&&(r.title=e[2]),void this.trigger("data",r);if(e=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"targetduration"},e[1]&&(r.duration=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-VERSION:([0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"version"},e[1]&&(r.version=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"media-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"playlist-type"},e[1]&&(r.playlistType=e[1]),void this.trigger("data",r);if(e=/^#EXT-X-BYTERANGE:(.*)?$/.exec(t),e)return r=$e(Ye(e[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",r);if(e=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(t),e)return r={type:"tag",tagType:"allow-cache"},e[1]&&(r.allowed=!/NO/.test(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-MAP:(.*)$/.exec(t),e){if(r={type:"tag",tagType:"map"},e[1]){const t=ze(e[1]);t.URI&&(r.uri=t.URI),t.BYTERANGE&&(r.byterange=Ye(t.BYTERANGE))}this.trigger("data",r)}else{if(e=/^#EXT-X-STREAM-INF:(.*)$/.exec(t),e)return r={type:"tag",tagType:"stream-inf"},e[1]&&(r.attributes=ze(e[1]),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=We(r.attributes.RESOLUTION)),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))),void this.trigger("data",r);if(e=/^#EXT-X-MEDIA:(.*)$/.exec(t),e)return r={type:"tag",tagType:"media"},e[1]&&(r.attributes=ze(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-ENDLIST/.exec(t),e)this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t),e)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(t),e)return r={type:"tag",tagType:"program-date-time"},e[1]&&(r.dateTimeString=e[1],r.dateTimeObject=new Date(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-KEY:(.*)$/.exec(t),e)return r={type:"tag",tagType:"key"},e[1]&&(r.attributes=ze(e[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);if(e=/^#EXT-X-START:(.*)$/.exec(t),e)return r={type:"tag",tagType:"start"},e[1]&&(r.attributes=ze(e[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r);if(e=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"cue-out-cont"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r);if(e=/^#EXT-X-CUE-OUT:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"cue-out"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t),e)return r={type:"tag",tagType:"cue-in"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r);if(e=/^#EXT-X-SKIP:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"skip"},r.attributes=ze(e[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(Ke)),void this.trigger("data",r);if(e=/^#EXT-X-PART:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"part"},r.attributes=ze(e[1]),["DURATION"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/.test(r.attributes[t]))})),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=Ye(r.attributes.BYTERANGE)),void this.trigger("data",r);if(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"server-control"},r.attributes=ze(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/.test(r.attributes[t]))})),void this.trigger("data",r);if(e=/^#EXT-X-PART-INF:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"part-inf"},r.attributes=ze(e[1]),["PART-TARGET"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),void this.trigger("data",r);if(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"preload-hint"},r.attributes=ze(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(r.attributes.hasOwnProperty(t)){r.attributes[t]=parseInt(r.attributes[t],10);const e="BYTERANGE-LENGTH"===t?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[e]=r.attributes[t],delete r.attributes[t]}})),void this.trigger("data",r);if(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"rendition-report"},r.attributes=ze(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseInt(r.attributes[t],10))})),void this.trigger("data",r);if(e=/^#EXT-X-DATERANGE:(.*)$/.exec(t),e&&e[1]){r={type:"tag",tagType:"daterange"},r.attributes=ze(e[1]),["ID","CLASS"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=String(r.attributes[t]))})),["START-DATE","END-DATE"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=new Date(r.attributes[t]))})),["DURATION","PLANNED-DURATION"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["END-ON-NEXT"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/i.test(r.attributes[t]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=r.attributes[t].toString(16))}));const t=/^X-([A-Z]+-)+[A-Z]+$/;for(const e in r.attributes){if(!t.test(e))continue;const n=/[0-9A-Fa-f]{6}/g.test(r.attributes[e]),i=/^\d+(\.\d+)?$/.test(r.attributes[e]);r.attributes[e]=n?r.attributes[e].toString(16):i?parseFloat(r.attributes[e]):String(r.attributes[e])}this.trigger("data",r)}else if(e=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(t),e)this.trigger("data",{type:"tag",tagType:"independent-segments"});else if(e=/^#EXT-X-I-FRAMES-ONLY/.exec(t),e)this.trigger("data",{type:"tag",tagType:"i-frames-only"});else{if(e=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(t),e)return r={type:"tag",tagType:"content-steering"},r.attributes=ze(e[1]),void this.trigger("data",r);if(e=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(t),e)return r={type:"tag",tagType:"i-frame-playlist"},r.attributes=ze(e[1]),r.attributes.URI&&(r.uri=r.attributes.URI),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=We(r.attributes.RESOLUTION)),r.attributes["AVERAGE-BANDWIDTH"]&&(r.attributes["AVERAGE-BANDWIDTH"]=parseInt(r.attributes["AVERAGE-BANDWIDTH"],10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),void this.trigger("data",r);if(e=/^#EXT-X-DEFINE:(.*)$/.exec(t),e)return r={type:"tag",tagType:"define"},r.attributes=ze(e[1]),void this.trigger("data",r);this.trigger("data",{type:"tag",data:t.slice(4)})}}}}else this.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))}addParser({expression:t,customType:e,dataParser:r,segment:n}){"function"!=typeof r&&(r=t=>t),this.customParsers.push((i=>{if(t.exec(i))return this.trigger("data",{type:"custom",data:r(i),customType:e,segment:n}),!0}))}addTagMapper({expression:t,map:e}){this.tagMappers.push((r=>t.test(r)?e(r):r))}}const Qe=function(t){const e={};return Object.keys(t).forEach((function(r){var n;e[(n=r,n.toLowerCase().replace(/-(\w)/g,(t=>t[1].toUpperCase())))]=t[r]})),e},Ze=function(t){const{serverControl:e,targetDuration:r,partTargetDuration:n}=t;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=r&&3*r,u=n&&2*n;r&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),n&&!e.hasOwnProperty(a)&&(e[a]=3*n,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<u&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${u}).`}),e[a]=u)};class tr extends _e{constructor(t={}){super(),this.lineStream=new Ve,this.parseStream=new Je,this.lineStream.pipe(this.parseStream),this.mainDefinitions=t.mainDefinitions||{},this.params=new URL(t.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const e=this,r=[];let n,i,s={},a=!1;const o=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let c=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let l=0,d=0;const f={};this.on("end",(()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&n&&(s.map=n),!s.key&&i&&(s.key=i),s.timeline||"number"!=typeof c||(s.timeline=c),this.manifest.preloadSegment=s)})),this.parseStream.on("data",(function(t){let h,p;if(e.manifest.definitions)for(const r in e.manifest.definitions)if(t.uri&&(t.uri=t.uri.replace(`{$${r}}`,e.manifest.definitions[r])),t.attributes)for(const n in t.attributes)"string"==typeof t.attributes[n]&&(t.attributes[n]=t.attributes[n].replace(`{$${r}}`,e.manifest.definitions[r]));({tag(){({version(){t.version&&(this.manifest.version=t.version)},"allow-cache"(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const e={};"length"in t&&(s.byterange=e,e.length=t.length,"offset"in t||(t.offset=l)),"offset"in t&&(s.byterange=e,e.offset=t.offset),l=e.offset+e.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.title&&(s.title=t.title),t.duration>0&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("com.microsoft.playready"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:t.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:He(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(i.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence"(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type"(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map(){n={},t.uri&&(n.uri=t.uri),t.byterange&&(n.byterange=t.byterange),i&&(n.key=i)},"stream-inf"(){this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(s.attributes||(s.attributes={}),$e(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},h=e[t.attributes["GROUP-ID"]],p={default:/yes/i.test(t.attributes.DEFAULT)},p.default?p.autoselect=!0:p.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(p.language=t.attributes.LANGUAGE),t.attributes.URI&&(p.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(p.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(p.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(p.forced=/yes/i.test(t.attributes.FORCED)),h[t.attributes.NAME]=p},discontinuity(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject;const{lastProgramDateTime:e}=this;this.lastProgramDateTime=new Date(t.dateTimeString).getTime(),null===e&&this.manifest.segments.reduceRight(((t,e)=>(e.programDateTime=t-1e3*e.duration,e.programDateTime)),this.lastProgramDateTime)},targetduration(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,Ze.call(this,this.manifest))},start(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){s.cueOut=t.data},"cue-out-cont"(){s.cueOutCont=t.data},"cue-in"(){s.cueIn=t.data},skip(){this.manifest.skip=Qe(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const e=this.manifest.segments.length,r=Qe(t.attributes);s.parts=s.parts||[],s.parts.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=d),d=r.byterange.offset+r.byterange.length);const n=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${n} for segment #${e}`,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((t,e)=>{t.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${e} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const e=this.manifest.serverControl=Qe(t.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Ze.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const e=this.manifest.segments.length,r=Qe(t.attributes),n=r.type&&"PART"===r.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=n?d:0,n&&(d=r.byterange.offset+r.byterange.length)));const i=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${i} for segment #${e}`,t.attributes,["TYPE","URI"]),r.type)for(let t=0;t<s.preloadHints.length-1;t++){const n=s.preloadHints[t];n.type&&n.type===r.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${i} for segment #${e} has the same TYPE ${r.type} as preload hint #${t}`})}},"rendition-report"(){const e=Qe(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);const r=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];a&&n.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${r}`,t.attributes,n)},"part-inf"(){this.manifest.partInf=Qe(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Ze.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Qe(t.attributes));const e=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${e}`,t.attributes,["ID","START-DATE"]);const r=this.manifest.dateRanges[e];r.endDate&&r.startDate&&new Date(r.endDate)<new Date(r.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),r.duration&&r.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),r.plannedDuration&&r.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const n=!!r.endOnNext;if(n&&!r.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),n&&(r.duration||r.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),r.duration&&r.endDate){const t=r.startDate.getTime()+1e3*r.duration;this.manifest.dateRanges[e].endDate=new Date(t)}if(f[r.id]){for(const t in f[r.id])if(r[t]&&JSON.stringify(f[r.id][t])!==JSON.stringify(r[t])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const t=this.manifest.dateRanges.findIndex((t=>t.id===r.id));this.manifest.dateRanges[t]=$e(this.manifest.dateRanges[t],r),f[r.id]=$e(f[r.id],r),this.manifest.dateRanges.pop()}else f[r.id]=r},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Qe(t.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",t.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const e=(t,e)=>{t in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${t}`}):this.manifest.definitions[t]=e};if("QUERYPARAM"in t.attributes){if("NAME"in t.attributes||"IMPORT"in t.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});const r=this.params.get(t.attributes.QUERYPARAM);return r?void e(t.attributes.QUERYPARAM,decodeURIComponent(r)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${t.attributes.QUERYPARAM}`})}return"NAME"in t.attributes?"IMPORT"in t.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in t.attributes&&"string"==typeof t.attributes.VALUE?void e(t.attributes.NAME,t.attributes.VALUE):void this.trigger("error",{message:`EXT-X-DEFINE: No value for ${t.attributes.NAME}`}):"IMPORT"in t.attributes?this.mainDefinitions[t.attributes.IMPORT]?void e(t.attributes.IMPORT,this.mainDefinitions[t.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${t.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:t.attributes,uri:t.uri,timeline:c}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",t.attributes,["BANDWIDTH","URI"])}}[t.tagType]||o).call(e)},uri(){s.uri=t.uri,r.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),i&&(s.key=i),s.timeline=c,n&&(s.map=n),d=0,null!==this.lastProgramDateTime&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*s.duration),s={}},comment(){},custom(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(e)}))}requiredCompatibilityversion(t,e){(t<e||!t)&&this.trigger("warn",{message:`manifest must be at least version ${e}`})}warnOnMissingAttributes_(t,e,r){const n=[];r.forEach((function(t){e.hasOwnProperty(t)||n.push(t)})),n.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${n.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}const er=class{constructor(){this.countDownload=0,this.idCurrentVideo=null,this.progress={},this.videosWaiting=[],this.infoVideoDownload={}}async fetchM3u8Url(t){const e=t.indexOf(".m3u8"),r=t.substring(0,t.lastIndexOf("/",e)),n=(await ke.get(t)).data,i=new tr;if(i.push(n),i.end(),i.manifest?.playlists?.length>0){const t=i.manifest?.playlists[0]?.uri,e=`${r}/${t}`,n=e.indexOf(".m3u8"),s=e.substring(0,e.lastIndexOf("/",n)),a=await ke.get(e),o=new tr;return o.push(a.data),o.end(),o.manifest.segments.map((t=>s+"/"+t.uri))}if(i.manifest.segments.length>0)return i.manifest.segments.map((t=>r+"/"+t.uri))}async fetchSegments(t){const e=t?.map((t=>this.fetchChunk(t)));return await Promise.all(e)}async fetchChunk(t){const e=await(await fetch(t)).arrayBuffer();return new Uint8Array(e)}async start(t){const e=await this.fetchM3u8Url(t),r=await this.fetchSegments(e);console.log({data:r})}async pause(){console.log(`Pause downloading: ${this.url}`),this.pause(this.url)}async resume(){console.log(`Resume downloading: ${this.url}`),this.resume(this.url)}async cancel(){console.log(`Cancel downloading: ${this.url}`),this.cancel(this.url)}},rr=class{constructor({url:t}){this.url=t,this.dbService=new O,this.downloadManager=new er,this.init()}async init(){await this.dbService.init(),console.log("HLSDownloader initialized with IndexedDB")}start(){console.log(`Start downloading: ${this.url}`),this.downloadManager.start(this.url)}pause(){console.log(`Pause downloading: ${this.url}`),this.downloadManager.pause(this.url)}resume(){console.log(`Resume downloading: ${this.url}`),this.downloadManager.resume(this.url)}cancel(){console.log(`Cancel downloading: ${this.url}`),this.downloadManager.cancel(this.url)}};(async()=>{const t=new rr({url:"https://vod.ottclouds.com/vods/9999/CcRxJOQgiwAFdpmYc7oezZM4Tvah7Lmp4/playlist.m3u8"});console.log({downloader:t}),t.start()})()})()})();